<html>
<title> Laborator xml </title>
<body>
<table width="100%">
<tr><td height="50" background="../../Images/imm_s.bmp"><center><font color= "white" size=5> Laborator xml </Center></TD></TR>
</table>
<a name="start"></a>
<font color= "Blue" size=5> Utilizare XML </font><br><br>

<li>Avand fisierul : <a href="./xml/ap_electr.xml">ap_electr.xml</a>, de forma:<br><br>
<center>
<table bgcolor="Azure" border="1" width="200" ><tr><td><center>  ap_electr.xml  </center> </tr></td>
<tr><td>

<!------------------------------------------------------------------->
<br><br><textarea width="100%" height="400px" style="width:600;height:300px"  >
<?xml version="1.0" encoding="ISO-8859-1"?>
  <vimeter>
  <caption>Voltmetru</caption> 
  <code>VA-220</code> 
  <mod>analog</mod> 
  <aspect>bar markmax="1"</aspect> 
  <backcolor>blue</backcolor> 
  <forecolor>white</forecolor> 
  <width>150</width> 
  <height>100</height> 
  <poz>vertical</poz> 
  <unit>volt</unit> 
  <val>220</val> 
  <minval>50</minval> 
  <maxval>250</maxval> 
  </vimeter>
</textarea>
<!------------------------------------------------------------------->

</tr></td>
</table>
</center>
<li>Afisati:
<ol> 
<li> - xml inclus in html
<li> - link catre xml
<li> - indirectare catre xml
<li> - afisare xml in pagina curenta
<li> - afisare xml + css in pagina curenta
<li> - afisare date din xml utilizand JavaScript

<li> - afisare date din xml-ul furnizat de aplicatia <a href="./xml/ap_electric.php">ap_electric.php</a> utilizand JavaScript.
<li> - afisare date din xml-ul furnizat de aplicatia <a href="./xml/ap_electric.php">ap_electric.php</a> utilizand instrumentatie virtuala. 
Puteti utiliza clasa "voltm" aflata in biblioteca <a href="voltm.js">voltm.js</a>. 
</ol>
<br><br><font color= "Blue" size=5> Rezolvari </font><br><br>
<ol> 
<li><a href="./xml/vezi_xml_v0.html">vezi_xml_v0</a> - xml inclus in html
<li><a href="./xml/ap_electr_v1.xml">vezi_xml_v1</a> - link catre xml
<li><a href="./xml/vezi_xml_v2.html">vezi_xml_v2</a> - indirectare catre xml
<li><a href="./xml/vezi_xml_v3.html">vezi_xml_v3</a> - afisare xml in pagina curenta
<li><a href="./xml/vezi_xml_v4.html">vezi_xml_v4</a> - afisare xml + css in pagina curenta
<li><a href="./xml/vezi_xml_v5.html">vezi_xml_v5</a> - afisare date din xml utilizand JavaScript
<li><a href="./xml/vezi_xml_v6.html">vezi_xml_v6</a> - afisare date din xml generat din php utilizand JavaScript
<li><a href="./xml/vezi_xml_v7.html">vezi_xml_v7</a> - afisare dinamica date din xml generat din php utilizand JavaScript

</ol>
<li> Afisare date din xml utilizand JavaScript 
<br><br>Continutul fisierului vezi_xml_v5.html <br><br>
<textarea width="100%" height="400px" style="width:100%;height:460px" name="code" wrap="logical" rows="12" cols="42">
<html>
<body>
<h2>Preluare date din XML</h3>
<p><b>Instrument virtual:</b> <span id="caption"></span><br />
<b>Mod</b> <span id="mod"></span><br />
<b>Valoare:</b> <span id="val"></span>

<script type="text/javascript">
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest()
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP")
  }
xhttp.open("GET","ap_electric.xml",false);
xhttp.send("");
xmlDoc=xhttp.responseXML;

document.getElementById("caption").innerHTML=xmlDoc.getElementsByTagName("caption")[0].childNodes[0].nodeValue;
document.getElementById("mod").innerHTML=xmlDoc.getElementsByTagName("mod")[0].childNodes[0].nodeValue;
document.getElementById("val").innerHTML=xmlDoc.getElementsByTagName("val")[0].childNodes[0].nodeValue;
</script>
</body>
</html>
</textarea>

<li>Afisare date din xml generat din php utilizand JavaScript<br><br>
Continutul fisierului vezi_xml_v6.html <br><br>
<textarea width="100%" height="400px" style="width:100%;height:460px" name="code" wrap="logical" rows="12" cols="42">
<html>
<body>
<h2>Preluare date din XML</h3>
<p><b>Instrument virtual:</b> <span id="caption"></span><br />
<b>Mod</b> <span id="mod"></span><br />
<b>Valoare:</b> <span id="val"></span>

<script type="text/javascript">
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest()
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP")
  }
xhttp.open("GET","ap_electric.php",false);
xhttp.send("");
xmlDoc=xhttp.responseXML;

document.getElementById("caption").innerHTML=xmlDoc.getElementsByTagName("caption")[0].childNodes[0].nodeValue;
document.getElementById("mod").innerHTML=xmlDoc.getElementsByTagName("mod")[0].childNodes[0].nodeValue;
document.getElementById("val").innerHTML=xmlDoc.getElementsByTagName("val")[0].childNodes[0].nodeValue;
</script>
</body>
</html>

</textarea>

<br> Continutul fisierului ap_electric.php <br>

<textarea width="100%" height="400px" style="width:100%;height:340px" name="code" wrap="logical" rows="12" cols="42">
&lt?php
header ("Content-Type:text/xml");
     
echo '&lt?xml version="1.0" encoding="UTF-8"?&gt
<vimeter>
  <caption>Voltmetru</caption> 
  <code>VA-220</code> 
  <mod>analog</mod> 
  <aspect>bar markmax="1"</aspect> 
  <backcolor>blue</backcolor> 
  <forecolor>white</forecolor> 
  <width>150</width> 
  <height>100</height> 
  <poz>vertical</poz> 
  <unit>volt</unit> 
   <val>'.rand(0,250).'</val>   
  <minval>50</minval> 
  <maxval>250</maxval> 
</vimeter>';
?&gt
</textarea>

<li>Afisare dinamica date din xml generat din php utilizand JavaScript<br><br>
Continutul fisierului vezi_xml_v7.html <br><br>
<textarea width="100%" height="400px" style="width:100%;height:570px" name="code" wrap="logical" rows="12" cols="42">
<html>
<body onLoad="cerere_d()">
<h2>Preluare dinamica date din XML</h3>
<p><b>Instrument virtual:</b> <span id="ap"></span><br />
<b>Mod</b> <span id="md"></span><br />
<b>Valoare:</b> <span id="vl"></span><br />
<b>Url:</b> <span id="ur"></span><br />
<script type="text/javascript">
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest()
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP")
  }
var xmlDoc=" ";	

function cerere_d(){
var url="./xml/ap_electric.php";	
url=url+"?q="+Math.random();
xhttp.open("GET",url,false);
xhttp.send("");
xmlDoc=xhttp.responseXML;
document.getElementById("ur").innerHTML=url;
if (xmlDoc!=null){
document.getElementById("ap").innerHTML=xmlDoc.getElementsByTagName("caption")[0].childNodes[0].nodeValue;
document.getElementById("md").innerHTML=xmlDoc.getElementsByTagName("mod")[0].childNodes[0].nodeValue;
document.getElementById("vl").innerHTML=xmlDoc.getElementsByTagName("val")[0].childNodes[0].nodeValue;
}
setTimeout("cerere_d()",1000);
}
</script>
</body>
</html>
</textarea>

<li>Afisare dinamica date din xml generat din php utilizand instrumentatie virtuala <br><br>

<form name="f44_2">
<textarea width="100%" height="400px" style="width:100%;height:900px" name="code" wrap="logical" rows="12" cols="42">
<html>
<head>
<script type="text/javascript" src="voltm.js"></script>
</head>
<body onLoad="cerere_d2()">
<h2>Preluare dinamica date din XML</h3>
<p><b>Instrument virtual:</b>
<br><center><table border=1><tr><td valign="top" width="310">
<center>
	<canvas id="desen2" width="420" height="270" style="background-color:#ffffff;border:1px solid #c3c3c3; ">
		Your browser does not support the HTML5 canvas tag.
	</canvas>
</center>
<span id="af_v2"></span>
</td></tr>
<tr><td>
<p><b>Instrument virtual:</b> <span id="ap2"></span><br />
<b>Mod</b> <span id="md2"></span><br />
<b>Valoare:</b> <span id="vl2"></span><br />
<b>Url:</b> <span id="ur2"></span><br />
</td></tr></table></center>

<script type="text/javascript">
var val_max=250;
var ctx2=desen2.getContext("2d");
voltm1 = new voltm(ctx2,10,10,400,250);

if (window.XMLHttpRequest)
  {
  xhttp2=new XMLHttpRequest()
  }
else
  {
  xhttp2=new ActiveXObject("Microsoft.XMLHTTP")
  }
var xmlDoc2=" ";	

function cerere_d2(){
var url2="./xml/ap_electric.php";	
url2=url2+"?q="+Math.random();
xhttp2.open("GET",url2,false);
xhttp2.send("");
xmlDoc2=xhttp2.responseXML;
document.getElementById("ur2").innerHTML=url2;
if (xmlDoc2!=null){
document.getElementById("ap2").innerHTML=xmlDoc2.getElementsByTagName("caption")[0].childNodes[0].nodeValue;
document.getElementById("md2").innerHTML=xmlDoc2.getElementsByTagName("mod")[0].childNodes[0].nodeValue;
v2=xmlDoc2.getElementsByTagName("val")[0].childNodes[0].nodeValue;
document.getElementById("vl2").innerHTML=v2;
voltm1.set_val(Math.round(val_max*v2/250));
}
setTimeout("cerere_d2()",1000);
}
</script>
</body>
</html>
</textarea>
</form>
<script>document.write(f44_2.code.value);</script>

</body>
</html>